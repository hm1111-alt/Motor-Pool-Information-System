<!DOCTYPE html>
<html>
<head>
    <title>Absolute Minimal Test</title>
</head>
<body>
    <h2>Minimal AJAX Test</h2>
    
    <select id="testSelect">
        <option value="">Select Office</option>
        <option value="1">Office 1</option>
        <option value="2">Office 2</option>
    </select>
    
    <div id="result"></div>
    <div id="error" style="color: red;"></div>

    <script>
        document.getElementById('testSelect').addEventListener('change', function() {
            const officeId = this.value;
            const result = document.getElementById('result');
            const error = document.getElementById('error');
            
            if (officeId) {
                result.innerHTML = 'Loading...';
                error.innerHTML = '';
                
                // Try multiple endpoints to see which works
                const endpoints = [
                    '/test/ajax/divisions/' + officeId,
                    '/admin/employees/get-divisions-by-office?office_id=' + officeId
                ];
                
                endpoints.forEach(endpoint => {
                    fetch(endpoint)
                        .then(response => {
                            console.log('Endpoint:', endpoint, 'Status:', response.status);
                            if (response.ok) {
                                return response.json();
                            } else {
                                throw new Error(`HTTP ${response.status} for ${endpoint}`);
                            }
                        })
                        .then(data => {
                            console.log('Success with:', endpoint);
                            console.log('Data:', data);
                            result.innerHTML = `SUCCESS! Got ${data.length} divisions<br>Endpoint: ${endpoint}`;
                        })
                        .catch(err => {
                            console.log('Failed:', endpoint, err.message);
                            error.innerHTML += `Failed: ${endpoint} - ${err.message}<br>`;
                        });
                });
            }
        });
    </script>
</body>
</html>